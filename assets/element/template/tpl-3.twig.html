<html>
<body>
	<h1>{{ documentObject.menutitle | default(documentObject.pagetitle) }}</h1>
    <p>Hello, world! It's page {{ modx.documentObject.pagetitle }} at {{ modx.config.site_url }}</p>
    [*pagetitle*] is {{ '[*pagetitle*]' | modxParser }}
    <ul>
        {% for i in range(1, 10) %}
            <li>{{ i }}</li>
        {% endfor %}
    </ul>
	{% if(modx.getLoginUserID('web')) %}
		User
	{% else %}
		Guest
	{% endif %}
	<hr />
	{% if debug and modx.getLoginUserID('mgr') %}
		Global modx cache size: {{ modx.nicesize(filesize(MODX_BASE_PATH ~ 'assets/cache/siteCache.idx.php')) }} <br />
		Count documents: {{ modx.db.getValue('SELECT count(`id`) FROM ' ~ modx.getFullTableName('site_content')) }} <br />
		Included files: {{ count(get_included_files()) }} <br />
	{% endif %}
	Url: {{ makeUrl( 1 ) }} or [~1~]<br />
	
    <h2>Run MODX snippet</h2>
    Result:<br>
		{{ runSnippet ('Wayfinder',{startId:0}) }}
    <br>Or:<br>
		{{ runSnippet ('Wayfinder',{startId:0}) | raw}}
	<br>Or:<br>
		{{ runSnippet('Wayfinder', {startId:0}) | modxParser | raw }}
	
    <h2>Get MODX chunk</h2>
    {{ modx.getChunk('mm_rules') }}
	

	<h2>Cache<h2>
	<h3>Time</h3>
	{% cache 'map' {time: 86400} %}
		map: {{ runSnippet('mapBuild') | raw }} 
	{% endcache %}

	<h3>Page</h3>
	{% cache 'menu' {key: 'page' ~ documentObject.id} %}
		{{ modx.runSnippet('DLBuildMenu', {
		  'idType' : 'parents',
		  'parents' : 0,
		  'maxDepth' : 2,
		  'paginate': 'pages',
		  'display': '1',
		  'TplMainOwner' : '@CODE: <div class="primary"><div class="bl_center"><ul>[+dl.wrap+]</ul></div></div>',
		  'TplSubOwner' : '@CODE: <ul>[+dl.wrap+]</ul>',
		  'TplOneItem' : '@CODE: <li class="epanded [+dl.class+]"><a href="[+url+]" title="[+e.title+]">[+title+]</a>[+dl.submenu+]</li>',
		  'noChildrenRowTPL' : '@CODE: <li class="[+dl.class+]"><a href="[+url+]" title="[+e.title+]">[+title+]</a>[+dl.submenu+]</li>',
		}) | raw }}
		{{ modx.getPlaceholder('pages') | raw }}
	{% endcache %}
	
	<h3>Global</h3>
	{% cache 'footer' {key: 'footer'} %}
		&copy; {{ modx.runSnippet('copyright', { 'date': 2014, 'sep' : '‚Äê' }) | raw }}. {{ modx.getConfig('site_name') }}.
	{% endcache %}
</body>
</html>